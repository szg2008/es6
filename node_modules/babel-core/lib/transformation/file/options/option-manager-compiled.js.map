{"version":3,"sources":["option-manager.js"],"names":[],"mappings":"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","file":"option-manager-compiled.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _objectWithoutProperties2 = require(\"babel-runtime/helpers/objectWithoutProperties\");\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _stringify = require(\"babel-runtime/core-js/json/stringify\");\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _assign = require(\"babel-runtime/core-js/object/assign\");\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nvar _typeof2 = require(\"babel-runtime/helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _node = require(\"../../../api/node\");\n\nvar context = _interopRequireWildcard(_node);\n\nvar _plugin2 = require(\"../../plugin\");\n\nvar _plugin3 = _interopRequireDefault(_plugin2);\n\nvar _babelMessages = require(\"babel-messages\");\n\nvar messages = _interopRequireWildcard(_babelMessages);\n\nvar _index = require(\"./index\");\n\nvar _resolve = require(\"../../../helpers/resolve\");\n\nvar _resolve2 = _interopRequireDefault(_resolve);\n\nvar _cloneDeepWith = require(\"lodash/cloneDeepWith\");\n\nvar _cloneDeepWith2 = _interopRequireDefault(_cloneDeepWith);\n\nvar _clone = require(\"lodash/clone\");\n\nvar _clone2 = _interopRequireDefault(_clone);\n\nvar _merge = require(\"../../../helpers/merge\");\n\nvar _merge2 = _interopRequireDefault(_merge);\n\nvar _config2 = require(\"./config\");\n\nvar _config3 = _interopRequireDefault(_config2);\n\nvar _removed = require(\"./removed\");\n\nvar _removed2 = _interopRequireDefault(_removed);\n\nvar _buildConfigChain = require(\"./build-config-chain\");\n\nvar _buildConfigChain2 = _interopRequireDefault(_buildConfigChain);\n\nvar _path = require(\"path\");\n\nvar _path2 = _interopRequireDefault(_path);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar OptionManager = function () {\n  function OptionManager(log) {\n    (0, _classCallCheck3.default)(this, OptionManager);\n\n    this.resolvedConfigs = [];\n    this.options = OptionManager.createBareOptions();\n    this.log = log;\n  }\n\n  OptionManager.memoisePluginContainer = function memoisePluginContainer(fn, loc, i, alias) {\n    for (var _iterator = OptionManager.memoisedPlugins, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : (0, _getIterator3.default)(_iterator);;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var cache = _ref;\n\n      if (cache.container === fn) return cache.plugin;\n    }\n\n    var obj = void 0;\n\n    if (typeof fn === \"function\") {\n      obj = fn(context);\n    } else {\n      obj = fn;\n    }\n\n    if ((typeof obj === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(obj)) === \"object\") {\n      var _plugin = new _plugin3.default(obj, alias);\n      OptionManager.memoisedPlugins.push({\n        container: fn,\n        plugin: _plugin\n      });\n      return _plugin;\n    } else {\n      throw new TypeError(messages.get(\"pluginNotObject\", loc, i, typeof obj === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(obj)) + loc + i);\n    }\n  };\n\n  OptionManager.createBareOptions = function createBareOptions() {\n    var opts = {};\n\n    for (var _key in _config3.default) {\n      var opt = _config3.default[_key];\n      opts[_key] = (0, _clone2.default)(opt.default);\n    }\n\n    return opts;\n  };\n\n  OptionManager.normalisePlugin = function normalisePlugin(plugin, loc, i, alias) {\n    plugin = plugin.__esModule ? plugin.default : plugin;\n\n    if (!(plugin instanceof _plugin3.default)) {\n      if (typeof plugin === \"function\" || (typeof plugin === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(plugin)) === \"object\") {\n        plugin = OptionManager.memoisePluginContainer(plugin, loc, i, alias);\n      } else {\n        throw new TypeError(messages.get(\"pluginNotFunction\", loc, i, typeof plugin === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(plugin)));\n      }\n    }\n\n    plugin.init(loc, i);\n\n    return plugin;\n  };\n\n  OptionManager.normalisePlugins = function normalisePlugins(loc, dirname, plugins) {\n    return plugins.map(function (val, i) {\n      var plugin = void 0,\n          options = void 0;\n\n      if (!val) {\n        throw new TypeError(\"Falsy value found in plugins\");\n      }\n\n      if (Array.isArray(val)) {\n        plugin = val[0];\n        options = val[1];\n      } else {\n        plugin = val;\n      }\n\n      var alias = typeof plugin === \"string\" ? plugin : loc + \"$\" + i;\n\n      if (typeof plugin === \"string\") {\n        var pluginLoc = (0, _resolve2.default)(\"babel-plugin-\" + plugin, dirname) || (0, _resolve2.default)(plugin, dirname);\n        if (pluginLoc) {\n          plugin = require(pluginLoc);\n        } else {\n          throw new ReferenceError(messages.get(\"pluginUnknown\", plugin, loc, i, dirname));\n        }\n      }\n\n      plugin = OptionManager.normalisePlugin(plugin, loc, i, alias);\n\n      return [plugin, options];\n    });\n  };\n\n  OptionManager.prototype.mergeOptions = function mergeOptions(_ref2) {\n    var _this = this;\n\n    var rawOpts = _ref2.options,\n        extendingOpts = _ref2.extending,\n        alias = _ref2.alias,\n        loc = _ref2.loc,\n        dirname = _ref2.dirname;\n\n    alias = alias || \"foreign\";\n    if (!rawOpts) return;\n\n    if ((typeof rawOpts === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(rawOpts)) !== \"object\" || Array.isArray(rawOpts)) {\n      this.log.error(\"Invalid options type for \" + alias, TypeError);\n    }\n\n    var opts = (0, _cloneDeepWith2.default)(rawOpts, function (val) {\n      if (val instanceof _plugin3.default) {\n        return val;\n      }\n    });\n\n    dirname = dirname || process.cwd();\n    loc = loc || alias;\n\n    for (var _key2 in opts) {\n      var option = _config3.default[_key2];\n\n      if (!option && this.log) {\n        if (_removed2.default[_key2]) {\n          this.log.error(\"Using removed Babel 5 option: \" + alias + \".\" + _key2 + \" - \" + _removed2.default[_key2].message, ReferenceError);\n        } else {\n          var unknownOptErr = \"Unknown option: \" + alias + \".\" + _key2 + \". Check out http://babeljs.io/docs/usage/options/ for more information about options.\";\n          var presetConfigErr = \"A common cause of this error is the presence of a configuration options object without the corresponding preset name. Example:\\n\\nInvalid:\\n  `{ presets: [{option: value}] }`\\nValid:\\n  `{ presets: [['presetName', {option: value}]] }`\\n\\nFor more detailed information on preset configuration, please see http://babeljs.io/docs/plugins/#pluginpresets-options.\";\n\n          this.log.error(unknownOptErr + \"\\n\\n\" + presetConfigErr, ReferenceError);\n        }\n      }\n    }\n\n    (0, _index.normaliseOptions)(opts);\n\n    if (opts.plugins) {\n      opts.plugins = OptionManager.normalisePlugins(loc, dirname, opts.plugins);\n    }\n\n    if (opts.presets) {\n      if (opts.passPerPreset) {\n        opts.presets = this.resolvePresets(opts.presets, dirname, function (preset, presetLoc) {\n          _this.mergeOptions({\n            options: preset,\n            extending: preset,\n            alias: presetLoc,\n            loc: presetLoc,\n            dirname: dirname\n          });\n        });\n      } else {\n        this.mergePresets(opts.presets, dirname);\n        delete opts.presets;\n      }\n    }\n\n    if (rawOpts === extendingOpts) {\n      (0, _assign2.default)(extendingOpts, opts);\n    } else {\n      (0, _merge2.default)(extendingOpts || this.options, opts);\n    }\n  };\n\n  OptionManager.prototype.mergePresets = function mergePresets(presets, dirname) {\n    var _this2 = this;\n\n    this.resolvePresets(presets, dirname, function (presetOpts, presetLoc) {\n      _this2.mergeOptions({\n        options: presetOpts,\n        alias: presetLoc,\n        loc: presetLoc,\n        dirname: _path2.default.dirname(presetLoc || \"\")\n      });\n    });\n  };\n\n  OptionManager.prototype.resolvePresets = function resolvePresets(presets, dirname, onResolve) {\n    return presets.map(function (val) {\n      var options = void 0;\n      if (Array.isArray(val)) {\n        if (val.length > 2) {\n          throw new Error(\"Unexpected extra options \" + (0, _stringify2.default)(val.slice(2)) + \" passed to preset.\");\n        }\n\n        var _val = val;\n        val = _val[0];\n        options = _val[1];\n      }\n\n      var presetLoc = void 0;\n      try {\n        if (typeof val === \"string\") {\n          presetLoc = (0, _resolve2.default)(\"babel-preset-\" + val, dirname) || (0, _resolve2.default)(val, dirname);\n\n          if (!presetLoc) {\n            var matches = val.match(/^(@[^/]+)\\/(.+)$/);\n            if (matches) {\n              var orgName = matches[1],\n                  presetPath = matches[2];\n\n              val = orgName + \"/babel-preset-\" + presetPath;\n              presetLoc = (0, _resolve2.default)(val, dirname);\n            }\n          }\n\n          if (!presetLoc) {\n            throw new Error(\"Couldn't find preset \" + (0, _stringify2.default)(val) + \" relative to directory \" + (0, _stringify2.default)(dirname));\n          }\n\n          val = require(presetLoc);\n        }\n\n        if ((typeof val === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(val)) === \"object\" && val.__esModule) {\n          if (val.default) {\n            val = val.default;\n          } else {\n            var _val2 = val,\n                __esModule = _val2.__esModule,\n                rest = (0, _objectWithoutProperties3.default)(_val2, [\"__esModule\"]);\n\n            val = rest;\n          }\n        }\n\n        if ((typeof val === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(val)) === \"object\" && val.buildPreset) val = val.buildPreset;\n\n        if (typeof val !== \"function\" && options !== undefined) {\n          throw new Error(\"Options \" + (0, _stringify2.default)(options) + \" passed to \" + (presetLoc || \"a preset\") + \" which does not accept options.\");\n        }\n\n        if (typeof val === \"function\") val = val(context, options);\n\n        if ((typeof val === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(val)) !== \"object\") {\n          throw new Error(\"Unsupported preset format: \" + val + \".\");\n        }\n\n        onResolve && onResolve(val, presetLoc);\n      } catch (e) {\n        if (presetLoc) {\n          e.message += \" (While processing preset: \" + (0, _stringify2.default)(presetLoc) + \")\";\n        }\n        throw e;\n      }\n      return val;\n    });\n  };\n\n  OptionManager.prototype.normaliseOptions = function normaliseOptions() {\n    var opts = this.options;\n\n    for (var _key3 in _config3.default) {\n      var option = _config3.default[_key3];\n      var val = opts[_key3];\n\n      if (!val && option.optional) continue;\n\n      if (option.alias) {\n        opts[option.alias] = opts[option.alias] || val;\n      } else {\n        opts[_key3] = val;\n      }\n    }\n  };\n\n  OptionManager.prototype.init = function init() {\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    for (var _iterator2 = (0, _buildConfigChain2.default)(opts, this.log), _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : (0, _getIterator3.default)(_iterator2);;) {\n      var _ref3;\n\n      if (_isArray2) {\n        if (_i2 >= _iterator2.length) break;\n        _ref3 = _iterator2[_i2++];\n      } else {\n        _i2 = _iterator2.next();\n        if (_i2.done) break;\n        _ref3 = _i2.value;\n      }\n\n      var _config = _ref3;\n\n      this.mergeOptions(_config);\n    }\n\n    this.normaliseOptions(opts);\n\n    return this.options;\n  };\n\n  return OptionManager;\n}();\n\nexports.default = OptionManager;\n\n\nOptionManager.memoisedPlugins = [];\nmodule.exports = exports[\"default\"];"]}